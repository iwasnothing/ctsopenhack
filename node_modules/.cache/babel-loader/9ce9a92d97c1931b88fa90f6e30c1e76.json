{"ast":null,"code":"import _classCallCheck from \"/Users/kahingleung/Documents/cts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kahingleung/Documents/cts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kahingleung/Documents/cts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kahingleung/Documents/cts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kahingleung/Documents/cts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kahingleung/Documents/cts/src/Loan.js\";\nimport React from \"react\";\nimport lightBaseTheme from \"material-ui/styles/baseThemes/lightBaseTheme\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport getMuiTheme from \"material-ui/styles/getMuiTheme\";\nimport Paper from \"material-ui/Paper\";\nimport { withRouter } from \"react-router-dom\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Slider from '@material-ui/lab/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Table from \"@material-ui/core/Table\";\nimport MenuBar from \"./MenuBar\";\nimport axios from \"axios\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nvar Loan =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Loan, _React$Component);\n\n  function Loan(props) {\n    var _this;\n\n    _classCallCheck(this, Loan);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Loan).call(this, props));\n\n    _this.handleChange1 = function (event, value) {\n      _this.setState({\n        borrow: value\n      }); //console.log(\"slide\",value)\n\n    };\n\n    _this.handleChange2 = function (event, value) {\n      _this.setState({\n        duration: value\n      }); //console.log(\"slide\",value)\n\n    };\n\n    _this.componentDidMount = function () {\n      var urlstr = 'https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/unsecured-sme-loans'; //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n\n      axios.get(urlstr).then(function (response) {\n        _this.setState({\n          tileData: response.data.data,\n          loading: false\n        });\n\n        console.log(\"data\", response.data);\n      });\n      var kurl = 'https://api.kivaws.org/v1/lending_actions/recent.json'; //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n\n      axios.get(kurl).then(function (response) {\n        _this.setState({\n          kivaData: response.data.lending_actions,\n          loading: false\n        });\n\n        console.log(\"data\", response.data);\n      });\n    };\n\n    _this.handleVerify = function () {\n      var from_bank = _this.state.borrow > _this.state.limit ? _this.state.limit * 1000 : _this.state.borrow * 1000;\n      var from_kiva = _this.state.borrow > _this.state.limit ? Math.round(_this.state.borrow - _this.state.limit) * 1000 : 0;\n\n      _this.setState({\n        activeStep: 1,\n        from_bank: from_bank,\n        from_kiva: from_kiva\n      });\n    };\n\n    _this.handleKiva = function () {\n      _this.setState({\n        loading: true\n      });\n\n      var r = _this.state.tileData[0].Brand[0].SMELoan[0].SMELoanMarketingState[0].LoanInterest.LoanInterestTierBandSet[0].LoanInterestTierBand[0].RepAPR;\n      var p = _this.state.borrow * 1000;\n      var t = Math.ceil(_this.state.duration * 3);\n      var urlstr = 'https://us-central1-ctsopenhack.cloudfunctions.net/calculate/'; //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n\n      axios.post(urlstr, {\n        \"amount\": p,\n        \"interest\": r,\n        \"month\": t\n      }).then(function (response) {\n        _this.setState({\n          activeStep: 2,\n          apr: r,\n          monthly: response.data.payment\n        });\n\n        console.log(\"calc\", response.data);\n      });\n    };\n\n    _this.reset = function () {\n      _this.setState({\n        activeStep: 0\n      });\n    };\n\n    _this.state = {\n      expanded: false,\n      loading: false,\n      tileData: [],\n      kivaData: [],\n      auth: true,\n      anchorEl: null,\n      open: false,\n      activeStep: 0,\n      borrow: 5,\n      from_bank: 0,\n      from_kiva: 0,\n      duration: 10,\n      limit: 25,\n      apr: 7,\n      monthly: 8000\n    };\n    return _this;\n  }\n\n  _createClass(Loan, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(MuiThemeProvider, {\n        muiTheme: getMuiTheme(lightBaseTheme),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(MenuBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(Paper, {\n        style: {\n          width: 450\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Stepper, {\n        activeStep: this.state.activeStep,\n        orientation: \"vertical\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Step, {\n        key: \"step1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Input Loan Details\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Borrow Amount: $\", this.state.borrow * 1000), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(Slider, {\n        style: {\n          width: 250\n        },\n        value: this.state.borrow,\n        \"aria-labelledby\": \"label\",\n        onChange: this.handleChange1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }), React.createElement(Typography, {\n        id: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Repayment months: \", Math.ceil(this.state.duration * 3)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(Slider, {\n        style: {\n          width: 250\n        },\n        value: this.state.duration,\n        \"aria-labelledby\": \"label\",\n        onChange: this.handleChange2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: this.handleVerify,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Submit\"))), React.createElement(Step, {\n        key: \"step2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Prelimiary Loan Suggestion\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        id: \"label\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"( p.s. subject to your credit condition )\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }), React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Borrow from\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Estimated Amount\"))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Commerical Bank\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"$\", this.state.from_bank)), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Kiva\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"$\", this.state.from_kiva)))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), this.state.loading ? React.createElement(\"div\", {\n        style: {\n          marginLeft: 80\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(CircularProgress, {\n        id: \"progressbar\",\n        color: \"secondary\",\n        size: 40,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      })) : React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: this.handleKiva,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Loan Projection\"), \" \"))), React.createElement(Step, {\n        key: \"step3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(StepLabel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Replayment Plan\"), React.createElement(StepContent, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, \"Resuted Loan\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, \" Value\"))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Annual Interest\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, this.state.apr, \"%\")), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Monthly Payment\"), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"$\", this.state.monthly)))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"https://www.business.hsbc.uk/en-gb/finance-and-borrowing/credit-and-lending/small-business-loan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Apply HSBC loan\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"a\", {\n        href: \"https://pages.kiva.org/borrow/start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, \"Apply Kiva loan\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(Button, {\n        variant: \"outlined\",\n        color: \"primary\",\n        onClick: this.reset,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"Start Over\")))))));\n    }\n  }]);\n\n  return Loan;\n}(React.Component);\n\nvar LoanWithRouter = withRouter(Loan);\nexport default LoanWithRouter;","map":{"version":3,"sources":["/Users/kahingleung/Documents/cts/src/Loan.js"],"names":["React","lightBaseTheme","MuiThemeProvider","getMuiTheme","Paper","withRouter","List","ListItem","ListItemIcon","ListItemText","ListItemSecondaryAction","ListSubheader","Button","Avatar","Stepper","Step","StepLabel","StepContent","Slider","Typography","TableRow","TableHead","TableCell","TableBody","Table","MenuBar","axios","CircularProgress","Loan","props","handleChange1","event","value","setState","borrow","handleChange2","duration","componentDidMount","urlstr","get","then","response","tileData","data","loading","console","log","kurl","kivaData","lending_actions","handleVerify","from_bank","state","limit","from_kiva","Math","round","activeStep","handleKiva","r","Brand","SMELoan","SMELoanMarketingState","LoanInterest","LoanInterestTierBandSet","LoanInterestTierBand","RepAPR","p","t","ceil","post","apr","monthly","payment","reset","expanded","auth","anchorEl","open","width","marginLeft","Component","LoanWithRouter"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport lightBaseTheme from \"material-ui/styles/baseThemes/lightBaseTheme\";\nimport MuiThemeProvider from \"material-ui/styles/MuiThemeProvider\";\nimport getMuiTheme from \"material-ui/styles/getMuiTheme\";\nimport Paper from \"material-ui/Paper\";\nimport { withRouter } from \"react-router-dom\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport Button from \"@material-ui/core/Button\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport StepContent from \"@material-ui/core/StepContent\";\nimport Slider from '@material-ui/lab/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Table from \"@material-ui/core/Table\";\nimport MenuBar from \"./MenuBar\";\nimport axios from \"axios\"\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nclass Loan extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n      loading: false,\n      tileData: [],\n      kivaData: [],\n      auth: true,\n      anchorEl: null,\n      open: false,\n      activeStep: 0,\n      borrow: 5,\n      from_bank: 0,\n      from_kiva: 0,\n      duration: 10,\n      limit: 25,\n      apr: 7,\n      monthly: 8000,\n    };\n  }\n  handleChange1 = (event,value) => {\n    this.setState({ borrow: value });\n    //console.log(\"slide\",value)\n  };\n  handleChange2 = (event,value) => {\n    this.setState({ duration: value });\n    //console.log(\"slide\",value)\n  };\n  componentDidMount = () => {\n    var urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/unsecured-sme-loans'\n    //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n    axios.get(urlstr)\n    .then(response => {\n      this.setState({tileData: response.data.data, loading: false})\n      console.log(\"data\",response.data)\n    }\n    )\n\n    var kurl='https://api.kivaws.org/v1/lending_actions/recent.json'\n    //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n    axios.get(kurl)\n    .then(response => {\n      this.setState({kivaData: response.data.lending_actions, loading: false})\n      console.log(\"data\",response.data)\n    }\n    )\n\n  };\n  handleVerify = () => {\n    var from_bank = this.state.borrow>this.state.limit ? this.state.limit*1000:this.state.borrow*1000\n    var from_kiva = this.state.borrow>this.state.limit ? Math.round(this.state.borrow-this.state.limit)*1000:0\n    this.setState({activeStep: 1, from_bank: from_bank, from_kiva: from_kiva})\n  };\n  handleKiva = () => {\n    this.setState({loading: true})\n    var r = this.state.tileData[0].Brand[0].SMELoan[0].SMELoanMarketingState[0].LoanInterest.LoanInterestTierBandSet[0].LoanInterestTierBand[0].RepAPR\n    var p = this.state.borrow*1000\n    var t = Math.ceil(this.state.duration*3)\n    var urlstr='https://us-central1-ctsopenhack.cloudfunctions.net/calculate/'\n    //urlstr='https://api.hsbc.qa.xlabs.one/productfinder/open-banking/v2.1/personal-current-accounts'\n    axios.post(urlstr,{\"amount\": p, \"interest\": r, \"month\": t})\n    .then(response => {\n      this.setState({\n        activeStep: 2,\n        apr: r,\n        monthly: response.data.payment\n      });\n      console.log(\"calc\",response.data)\n    }\n    )\n\n  };\n  reset = () => {\n    this.setState({activeStep: 0})\n  };\n\n  render() {\n    return (\n\n        <MuiThemeProvider muiTheme={getMuiTheme(lightBaseTheme)}>\n          <div>\n            <MenuBar />\n            <Paper style={{ width: 450 }}>\n            <Stepper\n              activeStep={this.state.activeStep}\n              orientation=\"vertical\"\n            >\n              <Step key=\"step1\">\n                <StepLabel>Input Loan Details</StepLabel>\n                <StepContent>\n                <Typography id=\"label\">Borrow Amount: ${this.state.borrow*1000}</Typography>\n                <br/>\n                <Slider\n                  style={{width: 250}}\n                  value={this.state.borrow}\n                  aria-labelledby=\"label\"\n                  onChange={this.handleChange1}\n                />\n                <br/>\n                <Typography id=\"label\">Repayment months: {Math.ceil(this.state.duration*3)}</Typography>\n                <br/>\n                <Slider\n                  style={{width: 250}}\n                  value={this.state.duration}\n                  aria-labelledby=\"label\"\n                  onChange={this.handleChange2}\n                />\n                <br/>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={this.handleVerify}\n                  >\n                    Submit\n                  </Button>\n                </StepContent>\n              </Step>\n              <Step key=\"step2\">\n                <StepLabel>Prelimiary Loan Suggestion</StepLabel>\n                <StepContent>\n\n                <Typography id=\"label\">( p.s. subject to your credit condition )</Typography>\n                <br/>\n                <Table>\n                  <TableHead>\n                    <TableRow>\n                      <TableCell>Borrow from</TableCell>\n                      <TableCell>Estimated Amount</TableCell>\n                    </TableRow>\n                  </TableHead>\n                  <TableBody>\n                  <TableRow>\n                     <TableCell>Commerical Bank</TableCell>\n                     <TableCell>${this.state.from_bank}</TableCell>\n                  </TableRow>\n                  <TableRow>\n                     <TableCell>Kiva</TableCell>\n                     <TableCell>${this.state.from_kiva}</TableCell>\n                  </TableRow>\n                  </TableBody>\n                  </Table>\n\n                <br/>\n                {this.state.loading ?  <div style={{marginLeft: 80}}>\n                                  <CircularProgress id='progressbar' color=\"secondary\" size={40} />\n                                </div> : <div>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={this.handleKiva}\n                  >\n                    Loan Projection\n                  </Button> </div>}\n                </StepContent>\n              </Step>\n              <Step key=\"step3\">\n                <StepLabel>Replayment Plan</StepLabel>\n                <StepContent>\n\n                  <Table>\n                    <TableHead>\n                      <TableRow>\n                        <TableCell>Resuted Loan</TableCell>\n                        <TableCell> Value</TableCell>\n                      </TableRow>\n                    </TableHead>\n                    <TableBody>\n                    <TableRow>\n                    <TableCell>Annual Interest</TableCell>\n                    <TableCell>{this.state.apr}%</TableCell>\n                 </TableRow>\n                 <TableRow>\n                 <TableCell>Monthly Payment</TableCell>\n                 <TableCell>${this.state.monthly}</TableCell>\n              </TableRow>\n                 </TableBody>\n                 </Table>\n                  <br/><a href=\"https://www.business.hsbc.uk/en-gb/finance-and-borrowing/credit-and-lending/small-business-loan\">Apply HSBC loan</a>\n                  <br/><a href=\"https://pages.kiva.org/borrow/start\">Apply Kiva loan</a>\n                  <br/><br/>\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    onClick={this.reset}\n                  >\n                    Start Over\n                  </Button>\n                </StepContent>\n              </Step>\n            </Stepper>\n            </Paper>\n          </div>\n        </MuiThemeProvider>\n\n    );\n  }\n}\nconst LoanWithRouter = withRouter(Loan);\nexport default LoanWithRouter;\n"]},"metadata":{},"sourceType":"module"}